<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <!-- ========== PWA Meta Tags ========== -->
    <meta name="theme-color" content="#1a2980">
    <meta name="description" content="é‚è¼¯é–˜è¨ˆç®—æ©Ÿ - æ‰‹æ©Ÿå‹å–„ç‰ˆ PWAï¼Œå¯é›¢ç·šä½¿ç”¨ï¼Œå¯å®‰è£åˆ°æ¡Œé¢">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="é‚è¼¯é–˜è¨ˆç®—æ©Ÿ">
    
    <title>ğŸ§  é‚è¼¯é–˜è¨ˆç®—æ©Ÿ PWA</title>
    
    <!-- ========== PWA Manifest ========== -->
    <link rel="manifest" href="./manifest.json">
    
    <!-- ========== Apple Touch Icons ========== -->
    <link rel="apple-touch-icon" href="./icon-192.png">
    <link rel="apple-touch-icon" sizes="192x192" href="./icon-192.png">
    <link rel="apple-touch-icon" sizes="512x512" href="./icon-512.png">
    
    <!-- ========== Favicon ========== -->
    <link rel="icon" type="image/png" sizes="32x32" href="./icon-192.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./icon-192.png">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', -apple-system, system-ui, sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            background: linear-gradient(135deg, #1a2980 0%, #26d0ce 100%);
            color: #333;
            min-height: 100vh;
            padding: 15px;
            font-size: 16px;
            -webkit-overflow-scrolling: touch;
        }
        
        .app-container {
            max-width: 100%;
            margin: 0 auto;
            padding-bottom: 80px; /* ç‚ºå®‰è£æŒ‰éˆ•ç•™ç©ºé–“ */
        }
        
        /* æ¨™é¡Œå€ */
        .header {
            text-align: center;
            margin-bottom: 20px;
            padding: 20px 15px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        h1 {
            color: #1a2980;
            font-size: 1.8rem;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .subtitle {
            color: #666;
            font-size: 1rem;
            line-height: 1.4;
        }
        
        .pwa-badge {
            display: inline-block;
            background: linear-gradient(135deg, #00b09b 0%, #96c93d 100%);
            color: white;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.8rem;
            margin-top: 5px;
            font-weight: 600;
        }
        
        /* æ‰‹æ©Ÿæ¨™ç±¤é  */
        .mobile-tabs {
            display: flex;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            margin-bottom: 15px;
            padding: 5px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .tab {
            flex: 1;
            text-align: center;
            padding: 15px 5px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            color: #666;
            font-size: 0.95rem;
        }
        
        .tab.active {
            background: #1a2980;
            color: white;
            box-shadow: 0 4px 8px rgba(26, 41, 128, 0.3);
        }
        
        .tab-content {
            display: none;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* è¼¸å…¥æ§åˆ¶å€ */
        .input-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .input-toggle {
            flex: 1;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 15px;
            padding: 20px 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 3px solid transparent;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .input-toggle.active {
            border-color: #1a2980;
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            transform: translateY(-5px);
        }
        
        .input-label {
            font-size: 1.1rem;
            font-weight: bold;
            color: #444;
            margin-bottom: 10px;
        }
        
        .input-value {
            font-size: 3rem;
            font-weight: bold;
            font-family: 'Courier New', monospace;
            color: #1a2980;
        }
        
        .input-value.one {
            color: #00b894;
        }
        
        .input-value.zero {
            color: #e74c3c;
        }
        
        /* é¡¯ç¤ºå€ */
        .display {
            background: #f8f9fa;
            border-radius: 20px;
            padding: 25px 20px;
            margin-bottom: 25px;
            border: 2px solid #e0e0e0;
            text-align: center;
        }
        
        .expression {
            font-size: 1.5rem;
            font-family: 'Courier New', monospace;
            margin-bottom: 20px;
            color: #2d3436;
            min-height: 30px;
            word-break: break-word;
            line-height: 1.4;
        }
        
        .result {
            font-size: 4.5rem;
            font-weight: bold;
            font-family: 'Courier New', monospace;
            min-height: 60px;
            margin-top: 10px;
        }
        
        .result-one {
            color: #00b894;
            text-shadow: 0 0 10px rgba(0, 184, 148, 0.3);
        }
        
        .result-zero {
            color: #e74c3c;
            text-shadow: 0 0 10px rgba(231, 76, 60, 0.3);
        }
        
        /* æŒ‰éµå€ */
        .keypad {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 25px;
        }
        
        .btn {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            border: none;
            padding: 20px 5px;
            border-radius: 15px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
            box-shadow: 0 5px 15px rgba(106, 17, 203, 0.2);
        }
        
        .btn:active {
            transform: scale(0.95);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        .btn-logic {
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
            color: #333;
        }
        
        .btn-clear {
            background: linear-gradient(135deg, #ff416c 0%, #ff4b2b 100%);
        }
        
        .btn-equals {
            background: linear-gradient(135deg, #00b09b 0%, #96c93d 100%);
            grid-column: span 3;
            font-size: 1.3rem;
            padding: 22px 5px;
        }
        
        /* çœŸå€¼è¡¨ */
        .truth-table {
            background: #f8f9fa;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            border: 2px solid #e0e0e0;
        }
        
        .truth-table h3 {
            color: #1a2980;
            margin-bottom: 15px;
            text-align: center;
            font-size: 1.3rem;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.95rem;
        }
        
        th {
            background: #1a2980;
            color: white;
            padding: 15px 10px;
            text-align: center;
            font-weight: 600;
        }
        
        td {
            padding: 15px 10px;
            text-align: center;
            border: 1px solid #e0e0e0;
            font-weight: 500;
        }
        
        tr:nth-child(even) {
            background: #f2f2f2;
        }
        
        .output-cell {
            font-family: 'Courier New', monospace;
            font-weight: bold;
            font-size: 1.1rem;
        }
        
        .output-1 { color: #00b894; }
        .output-0 { color: #e74c3c; }
        
        /* é‚è¼¯é–˜å¡ç‰‡ */
        .gate-card {
            background: white;
            border-radius: 20px;
            padding: 25px 20px;
            margin-bottom: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
            border: 2px solid transparent;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .gate-card.active {
            border-color: #1a2980;
            background: #f0f7ff;
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(26, 41, 128, 0.15);
        }
        
        .gate-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
        }
        
        .gate-title {
            color: #1a2980;
            font-size: 1.4rem;
            font-weight: bold;
        }
        
        .gate-symbol {
            font-size: 2.5rem;
            color: #6a11cb;
            font-weight: bold;
            font-family: 'Courier New', monospace;
        }
        
        .gate-visual {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 15px;
        }
        
        .gate-icon {
            font-size: 3.5rem;
            color: #6a11cb;
        }
        
        .gate-truth {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin: 15px 0;
        }
        
        .truth-item {
            background: #e8f4fc;
            padding: 12px 10px;
            border-radius: 10px;
            text-align: center;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }
        
        .gate-formula {
            font-family: 'Courier New', monospace;
            background: #2d3436;
            color: white;
            padding: 15px;
            border-radius: 12px;
            margin: 15px 0;
            font-size: 1.1rem;
            text-align: center;
            line-height: 1.4;
        }
        
        .gate-desc {
            color: #555;
            line-height: 1.6;
            margin: 15px 0;
            font-size: 0.95rem;
        }
        
        .gate-desc strong {
            color: #1a2980;
        }
        
        /* å¿«é€Ÿç¯„ä¾‹ */
        .examples {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 20px;
        }
        
        .example-btn {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            border: none;
            padding: 15px 10px;
            border-radius: 12px;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            color: #333;
            font-weight: 500;
        }
        
        .example-btn:active {
            transform: scale(0.95);
        }
        
        /* ========== PWA å°ˆç”¨æ¨£å¼ ========== */
        
        /* å®‰è£æç¤ºæŒ‰éˆ• */
        .install-prompt {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(135deg, #00b09b 0%, #96c93d 100%);
            color: white;
            padding: 12px 20px;
            border-radius: 50px;
            font-size: 0.9rem;
            z-index: 1000;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            display: none;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            animation: slideUp 0.3s ease;
            border: none;
            font-weight: 600;
        }
        
        .install-prompt.show {
            display: flex;
        }
        
        .install-icon {
            font-size: 1.2rem;
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* é›¢ç·šæç¤º */
        .offline-notice {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #ff6b6b;
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            z-index: 1001;
            display: none;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            box-shadow: 0 5px 20px rgba(255, 107, 107, 0.3);
        }
        
        .offline-notice.show {
            display: flex;
            animation: fadeInDown 0.3s ease;
        }
        
        .offline-notice.online {
            background: #00b894;
        }
        
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateX(-50%) translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
        }
        
        /* PWA åŠŸèƒ½å¡ç‰‡ */
        .pwa-features {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 20px;
        }
        
        .pwa-feature {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 10px;
            border-radius: 15px;
            text-align: center;
            font-size: 0.9rem;
        }
        
        .pwa-feature-icon {
            font-size: 1.5rem;
            margin-bottom: 8px;
        }
        
        /* æ‰‹æ©Ÿæ“ä½œæç¤º */
        .mobile-hint {
            position: fixed;
            bottom: 20px;
            left: 20px;
            right: 20px;
            background: rgba(26, 41, 128, 0.95);
            color: white;
            padding: 15px 20px;
            border-radius: 15px;
            font-size: 0.9rem;
            z-index: 1000;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            display: none;
        }
        
        .hint-text {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .hint-icon {
            font-size: 1.2rem;
        }
        
        /* éŸ¿æ‡‰å¼èª¿æ•´ */
        @media (max-width: 480px) {
            .keypad {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .btn-equals {
                grid-column: span 2;
            }
            
            .gate-visual {
                flex-direction: column;
                gap: 15px;
            }
            
            .gate-icon {
                font-size: 3rem;
            }
            
            h1 {
                font-size: 1.6rem;
            }
            
            .pwa-features {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 360px) {
            .input-controls {
                flex-direction: column;
            }
            
            .examples {
                grid-template-columns: 1fr;
            }
        }
        
        @media (min-width: 768px) {
            .app-container {
                max-width: 500px;
            }
        }
        
        /* å‹•ç•«æ•ˆæœ */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .pulse {
            animation: pulse 0.3s ease;
        }
        
        .slide-in {
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body>
    <!-- é›¢ç·šæç¤º -->
    <div class="offline-notice" id="offlineNotice">
        <span>ğŸ“¡</span>
        <span id="offlineText">é›¢ç·šæ¨¡å¼ä¸­</span>
    </div>
    
    <!-- å®‰è£æç¤ºæŒ‰éˆ• -->
    <button class="install-prompt" id="installPrompt">
        <span class="install-icon">ğŸ“±</span>
        <span>å®‰è£æ‡‰ç”¨ç¨‹å¼</span>
    </button>
    
    <div class="app-container">
        <!-- æ¨™é¡Œå€ -->
        <div class="header">
            <h1>ğŸ§  é‚è¼¯é–˜è¨ˆç®—æ©Ÿ PWA</h1>
            <div class="subtitle">æ‰‹æ©Ÿå‹å–„ç‰ˆ â€¢ é»æ“Šå­¸ç¿’ â€¢ å³æ™‚è¨ˆç®—</div>
            <div class="pwa-badge">ğŸ“± PWA æ‡‰ç”¨ç¨‹å¼</div>
        </div>
        
        <!-- æ‰‹æ©Ÿæ¨™ç±¤é  -->
        <div class="mobile-tabs">
            <div class="tab active" data-tab="calculator">è¨ˆç®—æ©Ÿ</div>
            <div class="tab" data-tab="gates">é‚è¼¯é–˜æ•™å­¸</div>
            <div class="tab" data-tab="pwa">PWA åŠŸèƒ½</div>
        </div>
        
        <!-- è¨ˆç®—æ©Ÿæ¨™ç±¤é  -->
        <div class="tab-content active" id="calculator-tab">
            <!-- è¼¸å…¥æ§åˆ¶ -->
            <div class="input-controls">
                <div class="input-toggle" id="toggleA">
                    <div class="input-label">è¼¸å…¥ A</div>
                    <div class="input-value zero" id="valueA">0</div>
                </div>
                <div class="input-toggle" id="toggleB">
                    <div class="input-label">è¼¸å…¥ B</div>
                    <div class="input-value zero" id="valueB">0</div>
                </div>
            </div>
            
            <!-- é¡¯ç¤ºå€ -->
            <div class="display">
                <div class="expression" id="expression">
                    é»æ“Šä¸‹æ–¹æŒ‰éˆ•å»ºç«‹è¡¨é”å¼
                </div>
                <div class="result" id="result">?</div>
            </div>
            
            <!-- æŒ‰éµå€ -->
            <div class="keypad">
                <button class="btn btn-logic" data-key="NOT">NOT</button>
                <button class="btn btn-logic" data-key="AND">AND</button>
                <button class="btn btn-logic" data-key="OR">OR</button>
                
                <button class="btn btn-logic" data-key="NAND">NAND</button>
                <button class="btn btn-logic" data-key="NOR">NOR</button>
                <button class="btn btn-logic" data-key="XOR">XOR</button>
                
                <button class="btn" data-key="A">A</button>
                <button class="btn" data-key="B">B</button>
                <button class="btn btn-clear" data-key="C">C</button>
                
                <button class="btn" data-key="(">(</button>
                <button class="btn" data-key=")">)</button>
                <button class="btn btn-clear" data-key="â†">â†</button>
                
                <button class="btn btn-equals" data-key="=">= è¨ˆç®—çµæœ</button>
            </div>
            
            <!-- çœŸå€¼è¡¨ -->
            <div class="truth-table">
                <h3>çœŸå€¼è¡¨</h3>
                <table>
                    <thead>
                        <tr>
                            <th>A</th>
                            <th>B</th>
                            <th>çµæœ</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>0</td>
                            <td>0</td>
                            <td id="tt-0-0" class="output-cell">-</td>
                        </tr>
                        <tr>
                            <td>0</td>
                            <td>1</td>
                            <td id="tt-0-1" class="output-cell">-</td>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>0</td>
                            <td id="tt-1-0" class="output-cell">-</td>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>1</td>
                            <td id="tt-1-1" class="output-cell">-</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- é‚è¼¯é–˜æ•™å­¸æ¨™ç±¤é  -->
        <div class="tab-content" id="gates-tab">
            <!-- NOT é–˜ -->
            <div class="gate-card" data-gate="NOT">
                <div class="gate-header">
                    <div class="gate-title">NOT é–˜</div>
                    <div class="gate-symbol">âŠ</div>
                </div>
                
                <div class="gate-visual">
                    <div class="gate-icon">NOT</div>
                    <div class="gate-truth">
                        <div class="truth-item">A=0 â†’ Y=1</div>
                        <div class="truth-item">A=1 â†’ Y=0</div>
                    </div>
                </div>
                
                <div class="gate-formula">Y = NOT A = Ä€</div>
                
                <div class="gate-desc">
                    <strong>åŠŸèƒ½ï¼š</strong>è¼¸å‡ºèˆ‡è¼¸å…¥ç›¸åã€‚è¼¸å…¥1è¼¸å‡º0ï¼Œè¼¸å…¥0è¼¸å‡º1ã€‚
                    <br><strong>æ¯”å–»ï¼š</strong>å°±åƒé–‹é—œçš„ç›¸åç‹€æ…‹ã€‚
                </div>
            </div>
            
            <!-- AND é–˜ -->
            <div class="gate-card" data-gate="AND">
                <div class="gate-header">
                    <div class="gate-title">AND é–˜</div>
                    <div class="gate-symbol">&</div>
                </div>
                
                <div class="gate-visual">
                    <div class="gate-icon">AND</div>
                    <div class="gate-truth">
                        <div class="truth-item">00â†’0</div>
                        <div class="truth-item">01â†’0</div>
                        <div class="truth-item">10â†’0</div>
                        <div class="truth-item">11â†’1</div>
                    </div>
                </div>
                
                <div class="gate-formula">Y = A AND B = AÂ·B</div>
                
                <div class="gate-desc">
                    <strong>åŠŸèƒ½ï¼š</strong>å…©å€‹è¼¸å…¥éƒ½æ˜¯1æ™‚ï¼Œè¼¸å‡ºæ‰æ˜¯1ã€‚
                    <br><strong>æ¯”å–»ï¼š</strong>åƒä¸²è¯é–‹é—œï¼Œå…©å€‹éƒ½è¦é–‹ç‡ˆæ‰äº®ã€‚
                </div>
            </div>
            
            <!-- OR é–˜ -->
            <div class="gate-card" data-gate="OR">
                <div class="gate-header">
                    <div class="gate-title">OR é–˜</div>
                    <div class="gate-symbol">â‰¥1</div>
                </div>
                
                <div class="gate-visual">
                    <div class="gate-icon">OR</div>
                    <div class="gate-truth">
                        <div class="truth-item">00â†’0</div>
                        <div class="truth-item">01â†’1</div>
                        <div class="truth-item">10â†’1</div>
                        <div class="truth-item">11â†’1</div>
                    </div>
                </div>
                
                <div class="gate-formula">Y = A OR B = A+B</div>
                
                <div class="gate-desc">
                    <strong>åŠŸèƒ½ï¼š</strong>è‡³å°‘ä¸€å€‹è¼¸å…¥æ˜¯1æ™‚ï¼Œè¼¸å‡ºå°±æ˜¯1ã€‚
                    <br><strong>æ¯”å–»ï¼š</strong>åƒä¸¦è¯é–‹é—œï¼Œä»»ä¸€é–‹ç‡ˆå°±äº®ã€‚
                </div>
            </div>
            
            <!-- NAND é–˜ -->
            <div class="gate-card" data-gate="NAND">
                <div class="gate-header">
                    <div class="gate-title">NAND é–˜</div>
                    <div class="gate-symbol">&amp;+â—‹</div>
                </div>
                
                <div class="gate-visual">
                    <div class="gate-icon">NAND</div>
                    <div class="gate-truth">
                        <div class="truth-item">00â†’1</div>
                        <div class="truth-item">01â†’1</div>
                        <div class="truth-item">10â†’1</div>
                        <div class="truth-item">11â†’0</div>
                    </div>
                </div>
                
                <div class="gate-formula">Y = NOT(A AND B)</div>
                
                <div class="gate-desc">
                    <strong>åŠŸèƒ½ï¼š</strong>ANDçš„åç›¸ã€‚åªæœ‰å…©å€‹è¼¸å…¥éƒ½æ˜¯1æ™‚ï¼Œè¼¸å‡ºæ‰æ˜¯0ã€‚
                    <br><strong>é‡è¦ï¼š</strong>é€™æ˜¯<b>é€šç”¨é–˜</b>ï¼Œå¯ç”¨å®ƒå¯¦ç¾æ‰€æœ‰é‚è¼¯åŠŸèƒ½ã€‚
                </div>
            </div>
            
            <!-- NOR é–˜ -->
            <div class="gate-card" data-gate="NOR">
                <div class="gate-header">
                    <div class="gate-title">NOR é–˜</div>
                    <div class="gate-symbol">â‰¥1+â—‹</div>
                </div>
                
                <div class="gate-visual">
                    <div class="gate-icon">NOR</div>
                    <div class="gate-truth">
                        <div class="truth-item">00â†’1</div>
                        <div class="truth-item">01â†’0</div>
                        <div class="truth-item">10â†’0</div>
                        <div class="truth-item">11â†’0</div>
                    </div>
                </div>
                
                <div class="gate-formula">Y = NOT(A OR B)</div>
                
                <div class="gate-desc">
                    <strong>åŠŸèƒ½ï¼š</strong>ORçš„åç›¸ã€‚åªè¦ä¸€å€‹è¼¸å…¥æ˜¯1ï¼Œè¼¸å‡ºå°±æ˜¯0ã€‚
                    <br><strong>é‡è¦ï¼š</strong>é€™ä¹Ÿæ˜¯<b>é€šç”¨é–˜</b>ã€‚
                </div>
            </div>
            
            <!-- XOR é–˜ -->
            <div class="gate-card" data-gate="XOR">
                <div class="gate-header">
                    <div class="gate-title">XOR é–˜</div>
                    <div class="gate-symbol">=1</div>
                </div>
                
                <div class="gate-visual">
                    <div class="gate-icon">XOR</div>
                    <div class="gate-truth">
                        <div class="truth-item">00â†’0</div>
                        <div class="truth-item">01â†’1</div>
                        <div class="truth-item">10â†’1</div>
                        <div class="truth-item">11â†’0</div>
                    </div>
                </div>
                
                <div class="gate-formula">Y = A XOR B = AâŠ•B</div>
                
                <div class="gate-desc">
                    <strong>åŠŸèƒ½ï¼š</strong>å…©å€‹è¼¸å…¥ä¸åŒæ™‚è¼¸å‡º1ï¼Œç›¸åŒæ™‚è¼¸å‡º0ã€‚
                    <br><strong>æ‡‰ç”¨ï¼š</strong>ç”¨æ–¼æ¯”è¼ƒå’ŒåŠ æ³•å™¨ã€‚
                </div>
            </div>
        </div>
        
        <!-- PWA åŠŸèƒ½æ¨™ç±¤é  -->
        <div class="tab-content" id="pwa-tab">
            <div class="gate-card">
                <div class="gate-header">
                    <div class="gate-title">ğŸ“± PWA åŠŸèƒ½ä»‹ç´¹</div>
                    <div class="gate-symbol">âœ¨</div>
                </div>
                
                <div class="gate-desc" style="text-align: center; margin-bottom: 25px;">
                    <strong>æ¼¸é€²å¼ç¶²é æ‡‰ç”¨ç¨‹å¼</strong><br>
                    å¯å®‰è£åˆ°æ‰‹æ©Ÿæ¡Œé¢ï¼ŒåƒåŸç”Ÿæ‡‰ç”¨ä¸€æ¨£ä½¿ç”¨
                </div>
                
                <div class="pwa-features">
                    <div class="pwa-feature">
                        <div class="pwa-feature-icon">ğŸ“±</div>
                        <div>å®‰è£åˆ°æ¡Œé¢</div>
                    </div>
                    <div class="pwa-feature">
                        <div class="pwa-feature-icon">ğŸ“¶</div>
                        <div>é›¢ç·šä½¿ç”¨</div>
                    </div>
                    <div class="pwa-feature">
                        <div class="pwa-feature-icon">âš¡</div>
                        <div>å¿«é€Ÿè¼‰å…¥</div>
                    </div>
                    <div class="pwa-feature">
                        <div class="pwa-feature-icon">ğŸ”„</div>
                        <div>è‡ªå‹•æ›´æ–°</div>
                    </div>
                </div>
                
                <div class="gate-desc" style="margin-top: 25px;">
                    <h4 style="color: #1a2980; margin-bottom: 10px;">å®‰è£æ–¹æ³•ï¼š</h4>
                    <ol style="line-height: 1.8; padding-left: 20px;">
                        <li>é»æ“Šå³ä¸Šè§’ã€Œå®‰è£æ‡‰ç”¨ç¨‹å¼ã€æŒ‰éˆ•</li>
                        <li>æˆ–ä½¿ç”¨ç€è¦½å™¨é¸å–®ä¸­çš„ã€Œå®‰è£ã€é¸é …</li>
                        <li>å®‰è£å¾Œæœƒå‡ºç¾åœ¨æ‰‹æ©Ÿæ¡Œé¢</li>
                        <li>å¯é›¢ç·šä½¿ç”¨ï¼Œè‡ªå‹•æ›´æ–°</li>
                    </ol>
                </div>
                
                <button class="btn btn-equals" style="margin-top: 20px;" id="checkPWA">
                    æª¢æŸ¥ PWA ç‹€æ…‹
                </button>
            </div>
        </div>
        
        <!-- æ‰‹æ©Ÿæ“ä½œæç¤º -->
        <div class="mobile-hint" id="mobileHint">
            <div class="hint-text">
                <span class="hint-icon">ğŸ‘†</span>
                <span id="hintMessage">é»æ“Šåˆ‡æ›è¼¸å…¥å€¼ A å’Œ B</span>
            </div>
        </div>
    </div>

    <script>
        // ========== PWA åŠŸèƒ½ ==========
        
        // PWA å®‰è£æç¤º
        let deferredPrompt;
        const installPrompt = document.getElementById('installPrompt');
        const offlineNotice = document.getElementById('offlineNotice');
        const offlineText = document.getElementById('offlineText');
        
        // æª¢æ¸¬å®‰è£æç¤º
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            
            // é¡¯ç¤ºå®‰è£æŒ‰éˆ•ï¼ˆå»¶é²é¡¯ç¤ºï¼‰
            setTimeout(() => {
                installPrompt.classList.add('show');
            }, 3000);
            
            // é»æ“Šå®‰è£æŒ‰éˆ•
            installPrompt.addEventListener('click', async () => {
                installPrompt.classList.remove('show');
                
                if (deferredPrompt) {
                    deferredPrompt.prompt();
                    const { outcome } = await deferredPrompt.userChoice;
                    
                    if (outcome === 'accepted') {
                        showHint('âœ… å·²æˆåŠŸå®‰è£åˆ°æ¡Œé¢', 3000);
                    }
                    deferredPrompt = null;
                }
            });
        });
        
        // æª¢æ¸¬æ‡‰ç”¨æ˜¯å¦å·²å®‰è£
        window.addEventListener('appinstalled', () => {
            console.log('PWAå·²å®‰è£');
            installPrompt.classList.remove('show');
        });
        
        // é›¢ç·š/ä¸Šç·šæª¢æ¸¬
        window.addEventListener('offline', () => {
            offlineNotice.classList.add('show');
            offlineText.textContent = 'ğŸ“¶ é›¢ç·šæ¨¡å¼ä¸­';
            showHint('å·²åˆ‡æ›åˆ°é›¢ç·šæ¨¡å¼', 2000);
        });
        
        window.addEventListener('online', () => {
            offlineNotice.classList.remove('show');
            setTimeout(() => {
                offlineNotice.classList.add('show');
                offlineNotice.classList.add('online');
                offlineText.textContent = 'âœ… å·²æ¢å¾©é€£ç·š';
                setTimeout(() => {
                    offlineNotice.classList.remove('show');
                    offlineNotice.classList.remove('online');
                }, 3000);
            }, 100);
        });
        
        // åˆå§‹åŒ–æª¢æŸ¥ç¶²è·¯ç‹€æ…‹
        if (!navigator.onLine) {
            offlineNotice.classList.add('show');
            offlineText.textContent = 'ğŸ“¶ é›¢ç·šæ¨¡å¼ä¸­';
        }
        
        // Service Worker è¨»å†Š
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then(registration => {
                        console.log('âœ… Service Worker è¨»å†ŠæˆåŠŸ:', registration.scope);
                        
                        // æª¢æŸ¥æ›´æ–°
                        registration.addEventListener('updatefound', () => {
                            const newWorker = registration.installing;
                            console.log('ğŸ”„ æ‰¾åˆ°æ–°ç‰ˆæœ¬ Service Worker');
                            
                            newWorker.addEventListener('statechange', () => {
                                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                    showHint('ğŸ”„ æœ‰æ–°ç‰ˆæœ¬å¯ç”¨ï¼Œé‡æ–°æ•´ç†é é¢æ›´æ–°', 5000);
                                }
                            });
                        });
                    })
                    .catch(err => {
                        console.log('âŒ Service Worker è¨»å†Šå¤±æ•—:', err);
                    });
            });
        }
        
        // æª¢æŸ¥ PWA ç‹€æ…‹æŒ‰éˆ•
        document.getElementById('checkPWA').addEventListener('click', () => {
            const isPWA = window.matchMedia('(display-mode: standalone)').matches || 
                         window.navigator.standalone;
            
            let message = 'ğŸ“± PWA ç‹€æ…‹æª¢æŸ¥ï¼š\n';
            message += `â€¢ å®‰è£ç‹€æ…‹: ${isPWA ? 'âœ… å·²å®‰è£' : 'ğŸ“± å¯å®‰è£'}\n`;
            message += `â€¢ é›¢ç·šæ”¯æ´: ${'serviceWorker' in navigator ? 'âœ… æ”¯æ´' : 'âŒ ä¸æ”¯æ´'}\n`;
            message += `â€¢ ç¶²è·¯ç‹€æ…‹: ${navigator.onLine ? 'âœ… åœ¨ç·š' : 'ğŸ“¶ é›¢ç·š'}\n`;
            message += `â€¢ å„²å­˜ç©ºé–“: ${'storage' in navigator ? 'âœ… å¯ç”¨' : 'âŒ ä¸å¯ç”¨'}`;
            
            alert(message);
        });
        
        // ========== æ‡‰ç”¨ç¨‹å¼é‚è¼¯ ==========
        
        // é‚è¼¯é–˜å‡½æ•¸
        const logicFunctions = {
            'NOT': (a, b) => a === 1 ? 0 : 1,
            'AND': (a, b) => (a === 1 && b === 1) ? 1 : 0,
            'OR': (a, b) => (a === 1 || b === 1) ? 1 : 0,
            'NAND': (a, b) => (a === 1 && b === 1) ? 0 : 1,
            'NOR': (a, b) => (a === 1 || b === 1) ? 0 : 1,
            'XOR': (a, b) => (a !== b) ? 1 : 0
        };
        
        // ç‹€æ…‹è®Šæ•¸
        let variables = { A: 0, B: 0 };
        let currentExpression = '';
        let currentGate = '';
        let isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
        
        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            initMobileTabs();
            initInputToggles();
            initButtons();
            initGateCards();
            updateDisplay();
            showHint('é»æ“Šåˆ‡æ›è¼¸å…¥å€¼ A å’Œ B', 3000);
            
            // æª¢æŸ¥æ˜¯å¦ç‚ºPWAæ¨¡å¼
            checkPWAMode();
        });
        
        // æª¢æŸ¥æ˜¯å¦ä»¥PWAæ¨¡å¼é‹è¡Œ
        function checkPWAMode() {
            const isStandalone = window.matchMedia('(display-mode: standalone)').matches || 
                               window.navigator.standalone;
            
            if (isStandalone) {
                document.querySelector('.pwa-badge').textContent = 'âœ… å·²å®‰è£ç‚ºæ‡‰ç”¨ç¨‹å¼';
                document.querySelector('.pwa-badge').style.background = 'linear-gradient(135deg, #00b09b 0%, #96c93d 100%)';
                
                // éš±è—å®‰è£æŒ‰éˆ•
                installPrompt.style.display = 'none';
            }
        }
        
        // åˆå§‹åŒ–æ‰‹æ©Ÿæ¨™ç±¤é 
        function initMobileTabs() {
            const tabs = document.querySelectorAll('.tab');
            const contents = document.querySelectorAll('.tab-content');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.dataset.tab;
                    
                    // ç§»é™¤æ‰€æœ‰activeé¡
                    tabs.forEach(t => t.classList.remove('active'));
                    contents.forEach(c => c.classList.remove('active'));
                    
                    // æ·»åŠ activeé¡åˆ°ç•¶å‰æ¨™ç±¤
                    tab.classList.add('active');
                    document.getElementById(`${tabId}-tab`).classList.add('active');
                    document.getElementById(`${tabId}-tab`).classList.add('slide-in');
                    
                    // æ›´æ–°æç¤º
                    if (tabId === 'calculator') {
                        showHint('é»æ“ŠæŒ‰éˆ•å»ºç«‹é‚è¼¯è¡¨é”å¼', 2000);
                    } else if (tabId === 'gates') {
                        showHint('é»æ“Šé‚è¼¯é–˜å¡ç‰‡æŸ¥çœ‹è©³ç´°èªªæ˜', 2000);
                    } else if (tabId === 'pwa') {
                        showHint('äº†è§£PWAåŠŸèƒ½èˆ‡å®‰è£æ–¹æ³•', 2000);
                    }
                });
            });
        }
        
        // åˆå§‹åŒ–è¼¸å…¥åˆ‡æ›
        function initInputToggles() {
            const toggleA = document.getElementById('toggleA');
            const toggleB = document.getElementById('toggleB');
            
            toggleA.addEventListener('click', () => {
                variables.A = variables.A === 0 ? 1 : 0;
                updateInputDisplay();
                calculate();
                showHint(`è¼¸å…¥ A å·²è¨­ç‚º ${variables.A}`, 1500);
            });
            
            toggleB.addEventListener('click', () => {
                variables.B = variables.B === 0 ? 1 : 0;
                updateInputDisplay();
                calculate();
                showHint(`è¼¸å…¥ B å·²è¨­ç‚º ${variables.B}`, 1500);
            });
        }
        
        // åˆå§‹åŒ–æŒ‰éˆ•
        function initButtons() {
            // é‚è¼¯æŒ‰éˆ•
            document.querySelectorAll('.btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const key = btn.dataset.key;
                    handleKeyPress(key);
                    btn.classList.add('pulse');
                    setTimeout(() => btn.classList.remove('pulse'), 300);
                });
            });
        }
        
        // åˆå§‹åŒ–é‚è¼¯é–˜å¡ç‰‡
        function initGateCards() {
            document.querySelectorAll('.gate-card').forEach(card => {
                card.addEventListener('click', () => {
                    const gate = card.dataset.gate;
                    
                    // é«˜äº®é¸ä¸­çš„å¡ç‰‡
                    document.querySelectorAll('.gate-card').forEach(c => {
                        c.classList.remove('active');
                    });
                    card.classList.add('active');
                    
                    // å»ºç«‹å°æ‡‰è¡¨é”å¼
                    if (gate === 'NOT') {
                        currentExpression = 'NOT A';
                    } else {
                        currentExpression = `A ${gate} B`;
                    }
                    
                    // åˆ‡æ›åˆ°è¨ˆç®—æ©Ÿæ¨™ç±¤é 
                    document.querySelector('[data-tab="calculator"]').click();
                    updateDisplay();
                    calculate();
                    
                    showHint(`å·²è¼‰å…¥ ${gate} é–˜è¡¨é”å¼`, 2000);
                });
            });
        }
        
        // è™•ç†æŒ‰éµè¼¸å…¥
        function handleKeyPress(key) {
            switch(key) {
                case 'C':
                    currentExpression = '';
                    showHint('å·²æ¸…é™¤è¡¨é”å¼', 1500);
                    break;
                case 'â†':
                    currentExpression = currentExpression.slice(0, -1).trim();
                    showHint('å·²åˆªé™¤æœ€å¾Œä¸€å€‹å­—ç¬¦', 1500);
                    break;
                case '=':
                    calculate();
                    return;
                default:
                    // é¿å…é€£çºŒç©ºæ ¼
                    if (currentExpression.endsWith(' ') && key === ' ') {
                        return;
                    }
                    
                    currentExpression += (currentExpression ? ' ' : '') + key;
                    showHint(`å·²æ·»åŠ : ${key}`, 1000);
                    break;
            }
            
            updateDisplay();
        }
        
        // æ›´æ–°é¡¯ç¤º
        function updateDisplay() {
            // æ›´æ–°è¡¨é”å¼
            const exprElement = document.getElementById('expression');
            exprElement.textContent = currentExpression || 'é»æ“Šä¸‹æ–¹æŒ‰éˆ•å»ºç«‹è¡¨é”å¼';
            
            // æ›´æ–°è¼¸å…¥é¡¯ç¤º
            updateInputDisplay();
        }
        
        // æ›´æ–°è¼¸å…¥é¡¯ç¤º
        function updateInputDisplay() {
            const valueA = document.getElementById('valueA');
            const valueB = document.getElementById('valueB');
            const toggleA = document.getElementById('toggleA');
            const toggleB = document.getElementById('toggleB');
            
            // æ›´æ–°æ•¸å€¼
            valueA.textContent = variables.A;
            valueB.textContent = variables.B;
            
            // æ›´æ–°æ¨£å¼
            valueA.className = `input-value ${variables.A === 1 ? 'one' : 'zero'}`;
            valueB.className = `input-value ${variables.B === 1 ? 'one' : 'zero'}`;
            
            // æ›´æ–°æ¿€æ´»ç‹€æ…‹
            toggleA.classList.toggle('active', variables.A === 1);
            toggleB.classList.toggle('active', variables.B === 1);
        }
        
        // è¨ˆç®—è¡¨é”å¼
        function calculate() {
            if (!currentExpression) {
                const resultElement = document.getElementById('result');
                resultElement.textContent = '?';
                resultElement.className = 'result';
                updateTruthTable();
                return;
            }
            
            try {
                const result = evaluateExpression(currentExpression);
                const resultElement = document.getElementById('result');
                resultElement.textContent = result;
                resultElement.className = `result ${result === 1 ? 'result-one' : 'result-zero'}`;
                resultElement.classList.add('pulse');
                setTimeout(() => resultElement.classList.remove('pulse'), 300);
                
                updateTruthTable();
                showHint(`è¨ˆç®—çµæœ: ${result}`, 1500);
            } catch (error) {
                document.getElementById('result').textContent = 'éŒ¯èª¤';
                document.getElementById('result').className = 'result';
                showHint('è¡¨é”å¼æœ‰èª¤ï¼Œè«‹æª¢æŸ¥', 2000);
            }
        }
        
        // è§£æè¡¨é”å¼
        function evaluateExpression(expr) {
            expr = expr.toUpperCase().trim();
            
            // è§£æç•¶å‰ä½¿ç”¨çš„é–˜
            const gates = ['NOT', 'AND', 'OR', 'NAND', 'NOR', 'XOR'];
            for (const gate of gates) {
                if (expr.includes(gate)) {
                    currentGate = gate;
                    break;
                }
            }
            
            // è™•ç† NOT
            if (expr === 'NOT A') return logicFunctions.NOT(variables.A, 0);
            if (expr === 'NOT B') return logicFunctions.NOT(variables.B, 0);
            
            // è™•ç†äºŒå…ƒé‹ç®—
            const patterns = [
                { op: 'AND', func: logicFunctions.AND },
                { op: 'OR', func: logicFunctions.OR },
                { op: 'NAND', func: logicFunctions.NAND },
                { op: 'NOR', func: logicFunctions.NOR },
                { op: 'XOR', func: logicFunctions.XOR }
            ];
            
            for (const pattern of patterns) {
                if (expr === `A ${pattern.op} B`) {
                    return pattern.func(variables.A, variables.B);
                }
                if (expr === `B ${pattern.op} A`) {
                    return pattern.func(variables.B, variables.A);
                }
            }
            
            return 0;
        }
        
        // æ›´æ–°çœŸå€¼è¡¨
        function updateTruthTable() {
            if (!currentExpression) {
                ['tt-0-0', 'tt-0-1', 'tt-1-0', 'tt-1-1'].forEach(id => {
                    document.getElementById(id).textContent = '-';
                    document.getElementById(id).className = 'output-cell';
                });
                return;
            }
            
            const combinations = [
                { A: 0, B: 0 },
                { A: 0, B: 1 },
                { A: 1, B: 0 },
                { A: 1, B: 1 }
            ];
            
            combinations.forEach(combo => {
                const originalA = variables.A;
                const originalB = variables.B;
                
                variables.A = combo.A;
                variables.B = combo.B;
                
                try {
                    const result = evaluateExpression(currentExpression);
                    const cellId = `tt-${combo.A}-${combo.B}`;
                    const cell = document.getElementById(cellId);
                    cell.textContent = result;
                    cell.className = `output-cell output-${result}`;
                    
                    // å¦‚æœæ˜¯ç•¶å‰å€¼ï¼Œé«˜äº®é¡¯ç¤º
                    if (originalA === combo.A && originalB === combo.B) {
                        cell.style.backgroundColor = '#fffacd';
                        setTimeout(() => {
                            cell.style.backgroundColor = '';
                        }, 1000);
                    }
                } catch (error) {
                    document.getElementById(`tt-${combo.A}-${combo.B}`).textContent = 'éŒ¯èª¤';
                }
                
                variables.A = originalA;
                variables.B = originalB;
            });
        }
        
        // é¡¯ç¤ºæ‰‹æ©Ÿæç¤º
        function showHint(message, duration = 3000) {
            const hint = document.getElementById('mobileHint');
            const hintMessage = document.getElementById('hintMessage');
            
            hintMessage.textContent = message;
            hint.style.display = 'block';
            
            setTimeout(() => {
                hint.style.display = 'none';
            }, duration);
        }
        
        // éµç›¤æ”¯æ´ï¼ˆæ¡Œé¢ç‰ˆï¼‰
        document.addEventListener('keydown', (e) => {
            const key = e.key.toUpperCase();
            
            if (key === 'ENTER') {
                calculate();
                e.preventDefault();
            } else if (key === 'BACKSPACE') {
                currentExpression = currentExpression.slice(0, -1).trim();
                updateDisplay();
                e.preventDefault();
            } else if (key === 'C' || key === 'ESCAPE') {
                currentExpression = '';
                updateDisplay();
                e.preventDefault();
            } else if (['A', 'B', '0', '1', '(', ')'].includes(key)) {
                handleKeyPress(key);
                e.preventDefault();
            } else if (key === '&') {
                handleKeyPress('AND');
                e.preventDefault();
            } else if (key === '|') {
                handleKeyPress('OR');
                e.preventDefault();
            } else if (key === '^') {
                handleKeyPress('XOR');
                e.preventDefault();
            } else if (key === '~' || key === '!') {
                handleKeyPress('NOT');
                e.preventDefault();
            }
        });
        
        // é è¨­è¼‰å…¥
        setTimeout(() => {
            currentExpression = 'A AND B';
            updateDisplay();
            calculate();
            showHint('è©¦è©¦é»æ“Šé‚è¼¯é–˜å¡ç‰‡å­¸ç¿’', 4000);
        }, 1500);
    </script>
</body>
</html>